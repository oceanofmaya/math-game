<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Math Game</title>
    <meta name="keywords" content="Math,Game" />
    <meta name="robots" content="index, follow" />
    <meta name="language" content="EN" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="version" content="1.2.1" />

    <link rel="icon" type="image/x-icon" href="favicon.ico" />

    <link rel="stylesheet" type="text/css" href="css/base.css" />
    <link rel="stylesheet" type="text/css" href="css/components.css" />
    <link rel="stylesheet" type="text/css" href="css/responsive.css" />
    <link rel="stylesheet" type="text/css" href="css/visual-themes/jellyfish.css" />
    <link rel="stylesheet" type="text/css" href="css/visual-themes/firefly.css" />
    <link rel="stylesheet" type="text/css" href="css/visual-themes/pearl.css" />
    <link rel="stylesheet" type="text/css" href="css/visual-themes/mushroom.css" />
    <link rel="stylesheet" type="text/css" href="css/visual-themes/maple.css" />

    <script src="js/constants.js"></script>
    <script src="js/sound-manager.js"></script>
    <script src="js/visual-themes/base-theme.js"></script>
    <script src="js/visual-themes/manager.js"></script>
    <script src="js/visual-themes/jellyfish.js"></script>
    <script src="js/visual-themes/firefly.js"></script>
    <script src="js/visual-themes/pearl.js"></script>
    <script src="js/visual-themes/mushroom.js"></script>
    <script src="js/visual-themes/maple.js"></script>
    <script src="js/scripts.js"></script>
    <script src="js/init.js"></script>
  </head>

  <body>
    <div id="version-display" class="version-display" aria-hidden="true"></div>
    <!-- Live region for screen reader announcements -->
    <div id="ariaLiveRegion" aria-live="polite" aria-atomic="true" class="sr-only"></div>
    <form id="gameForm" onsubmit="event.preventDefault();" role="main" aria-label="Math Game">
      <h1>Math Game</h1>
      <div class="flex-container count-container" role="status" aria-label="Score">
        <div>Correct:&nbsp;<span id="countCorrect" class="success" aria-label="Correct answers">0</span></div>
        <div>&nbsp;Wrong:&nbsp;<span id="countWrong" class="fail" aria-label="Wrong answers">0</span></div>
        <div>&nbsp;Skipped:&nbsp;<span id="countSkip" class="skip" aria-label="Skipped questions">0</span></div>
        <div id="timerContainer" class="hidden">
          <span>&nbsp;Time:&nbsp;</span>
          <span id="timerDisplay" aria-label="Time remaining">0:00</span>
        </div>
      </div>
      <div class="flex-container flex-direction-column">
        <div>
          <fieldset>
            <legend>Mode</legend>
            <div class="mode-toggle-container" role="toolbar" aria-label="Game controls">
              <button type="button" id="gameModeButton" class="mode-button" aria-label="Game mode" aria-pressed="true">
                Game
              </button>
              <button
                type="button"
                id="sampleModeButton"
                class="mode-button inactive"
                aria-label="Sample mode"
                aria-pressed="false"
              >
                Sample
              </button>
              <span class="separator" aria-hidden="true">|</span>
              <button
                type="button"
                id="musicToggleButton"
                class="mode-button"
                title="Toggle theme music"
                aria-label="Toggle theme music"
                aria-pressed="false"
              >
                ♪
              </button>
              <button
                type="button"
                id="helpToggle"
                class="mode-button help-toggle-button"
                title="Show/Hide How to Play"
                aria-label="Show help information"
                aria-expanded="false"
                aria-controls="helpContent"
              >
                ?
              </button>
              <span class="separator" aria-hidden="true">|</span>
              <button
                type="button"
                id="timedModeButton"
                class="mode-button inactive"
                title="Toggle timed mode"
                aria-label="Toggle timed mode"
                aria-pressed="false"
              >
                ⏱
              </button>
            </div>
          </fieldset>
          <fieldset id="helpContent" class="help-content hidden">
            <legend id="helpLegend">How to Play</legend>
            <div id="helpTextGame" class="help-text">
              <p><strong>Quick Start:</strong> Select a theme, then start answering math problems!</p>
              <p>
                <strong>Visual Effects:</strong> Correct answers create visual elements. They start grayscale and become
                colorful as you progress. More correct answers unlock pulse and wave effects.
              </p>
              <p>
                <strong>Operations:</strong> Choose a specific operation (+, −, ×, ÷) or select <strong>±</strong> for
                Mixed Operations mode, which randomly selects from all four operations for each question.
              </p>
              <p><strong>Max Number:</strong> Sets the difficulty range (1-999), but varies by operation:</p>
              <ul class="help-list">
                <li><strong>+</strong> and <strong>×</strong>: Both numbers from 1 to max</li>
                <li><strong>−</strong>: First number 1 to max, second ≤ first (no negatives)</li>
                <li><strong>÷</strong>: Divisor 1 to max, dividend up to max² (whole numbers only)</li>
              </ul>
              <p>
                <strong>Skip vs Wrong:</strong> Both remove visual elements. Use Skip when you don't know the answer;
                Wrong is for incorrect submissions.
              </p>
              <p>
                <strong>Timed Mode:</strong> Click the ⏱ button to start a 5-minute timed session. The timer begins
                immediately and counts down. Answer as many questions as possible before time runs out. Click the ⏱
                button again to stop the timer and reset. Your timed session results will be shown when the timer ends.
              </p>
            </div>
            <div id="helpTextSample" class="help-text hidden">
              <p><strong>Purpose:</strong> Test visual themes without playing the game.</p>
              <p>
                <strong>Controls:</strong> Select theme and element count, then use buttons to test effects: Birth
                (create), Age (colorize), Color, Pulse, Color Wave, End (remove), Reset.
              </p>
              <p><strong>Tip:</strong> Click "Birth" after changing element count to apply changes.</p>
            </div>
          </fieldset>
        </div>
        <div class="game-mode-fields">
          <div>
            <fieldset>
              <legend>Theme</legend>
              <label for="visualThemeSelect" class="sr-only">Select visual theme</label>
              <select id="visualThemeSelect" aria-label="Select visual theme">
                <option value="" selected disabled>Choose...</option>
                <option value="firefly">Firefly</option>
                <option value="jellyfish">Jellyfish</option>
                <option value="pearl">Pearl</option>
                <option value="mushroom">Mushroom</option>
                <option value="maple">Maple</option>
              </select>
            </fieldset>
          </div>
          <fieldset id="visualHint">
            <legend>Effects</legend>
            <!-- Visual effects status content will appear here -->
          </fieldset>
        </div>
        <div id="sampleModeFields" class="hidden">
          <div>
            <fieldset>
              <legend>Theme</legend>
              <label for="visualThemeSelectSample" class="sr-only">Select visual theme for sample mode</label>
              <select id="visualThemeSelectSample" aria-label="Select visual theme for sample mode">
                <option value="" selected disabled>Choose...</option>
                <option value="firefly">Firefly</option>
                <option value="jellyfish">Jellyfish</option>
                <option value="pearl">Pearl</option>
                <option value="mushroom">Mushroom</option>
                <option value="maple">Maple</option>
              </select>
            </fieldset>
          </div>
          <fieldset>
            <legend>Theme Controls</legend>
            <div class="sample-controls-container">
              <div class="sample-element-label">
                <span class="sample-element-label-text">Elements:</span>
                <label for="sampleElementCount" class="sr-only">Number of visual elements</label>
                <select id="sampleElementCount" class="sample-element-select" aria-label="Number of visual elements">
                  <option value="1">1</option>
                  <option value="2">2</option>
                  <option value="3">3</option>
                  <option value="4">4</option>
                  <option value="5" selected>5</option>
                  <option value="6">6</option>
                  <option value="7">7</option>
                  <option value="8">8</option>
                  <option value="9">9</option>
                  <option value="10">10</option>
                  <option value="15">15</option>
                  <option value="20">20</option>
                </select>
              </div>
              <div class="sample-element-hint">Click "Birth" to create elements</div>
              <div class="sample-lifecycle-hint">Lifecycle progression (top to bottom):</div>
              <button type="button" id="sampleBirth" class="sample-button" aria-label="Create visual elements">
                Birth
              </button>
              <button
                type="button"
                id="sampleAge"
                class="sample-button-secondary"
                aria-label="Remove grayscale filter from elements"
              >
                Age (Remove Grayscale)
              </button>
              <button
                type="button"
                id="sampleColor"
                class="sample-button-secondary"
                aria-label="Apply color to elements"
              >
                Color
              </button>
              <button type="button" id="samplePulse" class="sample-button-secondary" aria-label="Apply pulse animation">
                Pulse
              </button>
              <button
                type="button"
                id="sampleColorWave"
                class="sample-button-secondary"
                aria-label="Apply color wave effect"
              >
                Color Wave
              </button>
              <button type="button" id="sampleEnd" class="sample-button-secondary" aria-label="Remove elements">
                End
              </button>
              <button type="button" id="sampleReset" class="sample-button-reset" aria-label="Reset all visual elements">
                Reset
              </button>
            </div>
          </fieldset>
        </div>
        <div class="game-mode-fields">
          <fieldset>
            <legend>Operation</legend>
            <div class="operation-selector" role="group" aria-label="Math operation">
              <input
                type="button"
                class="operation-btn"
                id="op-add"
                value="+"
                title="Addition"
                aria-label="Addition"
                aria-pressed="false"
              />
              <input
                type="button"
                class="operation-btn"
                id="op-subtract"
                value="−"
                title="Subtraction"
                aria-label="Subtraction"
                aria-pressed="false"
              />
              <input
                type="button"
                class="operation-btn"
                id="op-multiply"
                value="×"
                title="Multiplication"
                aria-label="Multiplication"
                aria-pressed="false"
              />
              <input
                type="button"
                class="operation-btn"
                id="op-divide"
                value="÷"
                title="Division"
                aria-label="Division"
                aria-pressed="false"
              />
              <span class="separator" aria-hidden="true">|</span>
              <input
                type="button"
                class="operation-btn active"
                id="op-mixed"
                value="±"
                title="Mixed Operations"
                aria-label="Mixed Operations (random)"
                aria-pressed="true"
              />
              <span class="separator" aria-hidden="true">|</span>
              <input
                type="button"
                class="operation-btn"
                id="op-reset"
                value="↺"
                title="Reset Counts"
                aria-label="Reset score counts"
              />
            </div>
          </fieldset>
        </div>
        <div class="game-mode-fields">
          <fieldset>
            <legend>
              <span id="number1" aria-label="First number"></span>
              <span id="operationSymbol" aria-hidden="true">&nbsp;×&nbsp;</span>
              <span id="number2" aria-label="Second number"></span>
            </legend>
            <label for="answer" class="sr-only">Enter your answer</label>
            <input
              id="answer"
              type="number"
              placeholder="Answer"
              autofocus
              aria-label="Enter your answer"
              aria-required="true"
            />
            <div class="button-container">
              <input type="submit" id="submitAnswer" value="✓" title="Submit answer" aria-label="Submit answer" />
              <input type="button" id="skipQuestion" value="⏭" title="Skip question" aria-label="Skip this question" />
            </div>
            <div id="answerMessage" role="status" aria-live="polite" aria-atomic="true">
              <!-- answer message is going to go here -->
            </div>
          </fieldset>
        </div>
        <div class="game-mode-fields">
          <fieldset>
            <legend>Max Number</legend>
            <label for="maxNumber" class="sr-only">Maximum number for problems</label>
            <input
              id="maxNumber"
              type="number"
              value="20"
              placeholder="Number"
              aria-label="Maximum number for problems"
              min="1"
              max="999"
            />
            <div class="button-container">
              <input
                type="button"
                id="changeMaxNumber"
                value="↻"
                title="Change maximum number"
                aria-label="Apply maximum number change"
              />
            </div>
          </fieldset>
        </div>
      </div>
    </form>
  </body>
</html>
